<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./styles/signup.css">
</head>
<body>
    <div id="navbar">
        <div id="navbar-left">
            <img id="logo" src="../SHORTS.png" alt="Hello">
        </div>
    </div>
    <div id="space-navbar"></div>
    <div id="parent">
        <h1>Sign up and start shortening</h1>
        <div id="signupnew">
            Already have an account? <a href="login.html"> Login</a>
        </div>
        <button id="google"><img src="https://cdn-icons-png.flaticon.com/128/300/300221.png" alt=""> Signup with Google</button>
        <p class="separator t-center">
            <span>Or</span>
        </p>
        <div id="signup">
            <label for="email"><b>Email Address</b></label>
            <input type="email" name="email" id="email" required>
            <label for="user-name"><b>User Name</b></label>
            <input type="text" name="user-name" id="username" required>
            <label for="pass"><b>Password</b></label>
            <input type="password" name="pass" id="pass" required>
            <button type="submit" onclick="onSignup()" class="signupbtn">Sign Up with Email</button>
        </div>
        <div class="switch terms-and-conditions" style="margin-top: 0px;">
            <span>By 
                <span class="to-sign-up">signing in with</span>
                <span class="to-sign-in">creating</span> 
                an account, you agree to 
                <br>Bitly's
                <a href="" id="terms-of-service-link">Terms of Service</a>, 
                <a href="" id="privacy-policy-link">Privacy Policy</a> and 
                <a href="" id="acceptable-use-link">Acceptable Use Policy.</a>
            </span>
        </div>
    </div>
    
</body>
</html>
<script>
    const onSignup = ()=>{

        const payload ={
        username:document.getElementById("username").value,
        email:document.getElementById("email").value,
        password:document.getElementById("pass").value,
        }
        console.log(payload)
        fetch("http://localhost:9090/user/sign_up",{
            method:"POST",
            headers:{
                "Content-Type":"application/json"
            },
            body:JSON.stringify(payload)
        }).then(res=>res.json())
        .then(res=>{
            console.log(res)
            alert(`You have been succesfully signed Up with our website Mr. ${payload.username}`)
            window.location.href ="login.html"
        })
        .catch(err=>console.log(err))
    }
    
</script> 
